<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="invoice_v11_payments" language="groovy" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="3.0"/>
	<property name="ireport.x" value="9"/>
	<property name="ireport.y" value="0"/>
	<parameter name="IDS" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT  aj.name AS "Payment_name",
        absl.amount AS "Payment_amount",
        cl.name AS "Payment_card_lot",
        cv.name AS "Payment_card_voucher",
        cv.quota_qty AS "Payment_card_quota"

FROM pos_order po
	LEFT JOIN account_invoice ai ON ai.id = po.invoice_id
	LEFT JOIN account_bank_statement_line absl ON absl.pos_statement_id = po.id
	LEFT JOIN account_journal aj ON aj.id = absl.journal_id
          LEFT JOIN card_voucher cv ON cv.id = absl.card_voucher_id
          LEFT JOIN card_lot cl ON cl.id = cv.card_lot_id


WHERE ai.id IN ($P{IDS})]]>
	</queryString>
	<field name="Payment_name" class="java.lang.String"/>
	<field name="Payment_amount" class="java.math.BigDecimal"/>
	<field name="Payment_card_lot" class="java.lang.Integer"/>
	<field name="Payment_card_voucher" class="java.lang.String"/>
	<field name="Payment_card_quota" class="java.lang.Integer"/>
	<variable name="sum_amount" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{Payment_amount}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="34" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="21" width="79" height="12"/>
				<box leftPadding="2"/>
				<textElement lineSpacing="Single">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Método de Pago]]></text>
			</staticText>
			<staticText>
				<reportElement x="173" y="21" width="58" height="12"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" lineSpacing="Single">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Importe]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="231" height="20"/>
				<textElement textAlignment="Center" lineSpacing="Single">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Recibimos]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="33" width="231" height="1"/>
			</line>
			<staticText>
				<reportElement x="79" y="21" width="25" height="12"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Center" lineSpacing="Single">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Lote]]></text>
			</staticText>
			<staticText>
				<reportElement x="104" y="21" width="34" height="12"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Center" lineSpacing="Single">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Cupon]]></text>
			</staticText>
			<staticText>
				<reportElement x="138" y="21" width="35" height="12"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Center" lineSpacing="Single">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Cuotas]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement x="0" y="0" width="79" height="12"/>
				<box leftPadding="2"/>
				<textElement lineSpacing="Single">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{Payment_name}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement stretchType="RelativeToBandHeight" x="173" y="0" width="58" height="12"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle" lineSpacing="Single">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{Payment_amount}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement positionType="Float" x="0" y="12" width="231" height="1"/>
			</line>
			<textField pattern="###0" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="79" y="0" width="25" height="12"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" lineSpacing="Single">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{Payment_card_lot}]]></textFieldExpression>
			</textField>
			<textField pattern="###0" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="104" y="0" width="34" height="12"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" lineSpacing="Single">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{Payment_card_voucher}]]></textFieldExpression>
			</textField>
			<textField pattern="###0" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="138" y="0" width="35" height="12"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" lineSpacing="Single">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{Payment_card_quota}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="13">
			<staticText>
				<reportElement x="0" y="0" width="79" height="12"/>
				<box leftPadding="2"/>
				<textElement lineSpacing="Single">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Recibido]]></text>
			</staticText>
			<textField pattern="¤ #,##0.00">
				<reportElement x="173" y="0" width="58" height="12"/>
				<textElement textAlignment="Right" lineSpacing="Single">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$V{sum_amount}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="12" width="231" height="1"/>
			</line>
		</band>
	</summary>
</jasperReport>
